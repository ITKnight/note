# 该文档 说明如何在你的web 项目中从0 到有 使用 GULP 进行 构建##前期准备* 确认自己的电脑中安装了 NODEJS  因为项目中依赖都是由 NODEJS 提供的 npm 进行管理。（打开cmd 输入 npm -v 确认是否已经安装）* 更换 npm 源到到淘宝的源下， 原型npm 会从国外进行 依赖查询，慢。切换到淘宝的源，所有的npm 命令 对应换成 cnpm,更换源的方式如下：		npm install -g cnpm --registry=https://registry.npm.taobao.org## 全局安装gulp全局安装 gulp 在没有全局安装以前，是不能直接运行gulp的，安装完成后，才可以正确运行，安装代码如下:		cnpm install gulp -g //-g 为global的意思，也就是全局安装了		## 开始编写web项目到你常用的开发目录下，创建你的web项目目录。此处为demogulp为例为例* cd 到 该目录下，执行npm 管理的初始化		cnpm init //该命令，完成后，会在 demogulp下创建一packgage.json的文件，该项目的配置依赖等信息都在改文件中保存。		* 安装该项目用到的依赖		cnpm install gulp gulp-minify-css gulp-concat gulp-uglify gulp-rename run-sequence gulp-htmlmin del gulp-less --save //--save的意思就是将这些模块安装到了该项目目录中，并非全局安装，只在该项目下面才有效，区别-g,后面的gulpfile.js注释会说明这些模块是干嘛的* 创建gulpfile.js gulp 是通过该文件进行任务控制管理的，他是gulp 的核心文件，所有的任务都在这里面进行编写，创建该文件，并将如下代码复制进去(注释代码中有)。```javascript//将项目中任务用到的依赖引入到该gulp中，这些也就是 前面安装的许多模块了var gulp = require('gulp'), //gulp 基本的任务控制    minifycss = require('gulp-minify-css'), //css 压缩插件，将格式化的css 压缩成一行    concat = require('gulp-concat'), // 文件合并插件 ，他可以将一堆文件合并成一个    uglify = require('gulp-uglify'), //js 压缩插件， 就是他将js压缩，丑化    rename = require('gulp-rename'), // 文件重命名插件    runsequence=require('run-sequence'), // 按照顺讯执行的一个插件，这个其实可以不用 ，    htmlmin=require('gulp-htmlmin'), //html 压缩插件，能将 html 进行压缩    less = require('gulp-less'),  // less插件，将 less 编译成 css的就是他了    del = require('del');  // 文件删除 插件  /**压缩css  *  * 此处定义了一个 压缩css的任务，主要任务实际src/css/目录下的所有css 文件 合并成main.css 再移动到 dist/css 目录下，压缩  **/gulp.task('minifycss', function() {    return gulp.src('src/css/*.css')      //压缩所有的css文件 位置在 src/css/        .pipe(concat('main.css'))    //合并所有css到main.css        .pipe(gulp.dest('dist/css'))   //输出到文件夹dist/css        .pipe(rename({suffix: '.min'}))   //rename压缩后的文件名        .pipe(minifycss())  //执行压缩        .pipe(gulp.dest('dist/css'));  //输出});/**压缩js  *  * 该任务 压缩js, 将 src/js 下的所有js 文件合并成main.js 并且 输出到 dist/js 目录 在压缩  **/gulp.task('js', function() {    return gulp.src('src/js/*.js')        .pipe(concat('main.js'))    //合并所有js到main.js        .pipe(gulp.dest('dist/js'))    //输出main.js到文件夹        .pipe(rename({suffix: '.min'}))   //rename压缩后的文件名        .pipe(uglify())    //压缩        .pipe(gulp.dest('dist/js'));  //输出});/**压缩HTML  *  * 压缩HMTL ，将src下的所有html 压缩了 并且输出到 dist/ 目录  */gulp.task('html', function () {    var options = {        removeComments: true,//清除HTML注释        collapseWhitespace: true,//压缩HTML        collapseBooleanAttributes: true,//省略布尔属性的值 <input checked="true"/> ==> <input />        removeEmptyAttributes: true,//删除所有空格作属性值 <input id="" /> ==> <input />        removeScriptTypeAttributes: true,//删除<script>的type="text/javascript"        removeStyleLinkTypeAttributes: true,//删除<style>和<link>的type="text/css"        minifyJS: true,//压缩页面JS        minifyCSS: true//压缩页面CSS    };    gulp.src('src/*.html')        .pipe(htmlmin(options))        .pipe(gulp.dest('dist/'));});/*清理任务  *  * 该任务来完成 清理任务，删除掉 dist 目录下的所有内容  **/gulp.task('clean', function(cb) {    return  del(['dist/css', 'dist/js','dist/index.html'], cb)});/*执行LESS任务  *  * 执行LESS任务 将 src/less/下面的所有less 文件 编译，并且生成的css压缩，输出到了 dist/css 目录下面  */gulp.task('less', function () {    return gulp.src('src/less/*.less')        .pipe(less())        .pipe(minifycss())        .pipe(gulp.dest('dist/css'));});/*定义了核心任务，在这里 调用了前面编写的所有任务，并创建对文件进行监听任务*/gulp.task('build', function(cb) {    runsequence('clean','less','html','js', cb);    gulp.watch("src/*.html",["html"]);    gulp.watch("src/less/*.less",["less"]);    gulp.watch("src/js/*.js",["js"]);});/* default 任务 为 gulpfile.js 的默认入口任务，相当于 c语言的main方法，gulp 指名任务的情况下，会默认执行 该任务*/gulp.task('default', ['build'], function() { //这里在 default 前 会先调用  build 任务 ，任务名后面的任务，为依赖任务，顺序优先于任务执行});```* 在demogulp 目录下面创建 src 目录 你所有的编码 都在这里做。 你可以在该目录下 分别创建  less css（如果纯less的话，这个可以不要） js 等目录以及你要编写的html* 在cmd 下 运行 gulp 就好 他会默认执行任务。 他会默认监听你文件的所有改动，并自动编译，你可以把你的文件 直接饮用dist 目录的。## 备注 * 我对gulp 也没有细致的去学习，只是目前根据这个用法来说，开发起来效率还是很不错的，另外，还有许多优秀的功能没有用，比如说，热更新，在这点上，我跟倾向于另外一个脚手架 叫做yeoman，他其中一个webapp 的生成器，实际上就是帮你把上面的所有活都给你干了。* win 10 和win 7的默认 cmd 对git的支持不好，个人觉得  用 git 带的 git-bash 客户端比较不错，对git支持也挺好* 这里面没有提到git 如果用git的话，记得把 node_modules 放到 .gitiginore  里，这样，不会将 该内容带入git管理，在其他地方pull下来以后，先运行 cnpm install  他会根据 package.json 里面依赖配置自动安装依赖 带上她只会是累赘												